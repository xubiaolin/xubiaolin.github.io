{
    "version": "https://jsonfeed.org/version/1",
    "title": "徐镖林的网络博客 • All posts by \"openwrt\" tag",
    "description": "",
    "home_page_url": "https://xubiaolin.github.io",
    "items": [
        {
            "id": "https://xubiaolin.github.io/2025/04/11/wang-luo-ke-ji/openwrt-an-zhuang-pei-zhi-tailscale/",
            "url": "https://xubiaolin.github.io/2025/04/11/wang-luo-ke-ji/openwrt-an-zhuang-pei-zhi-tailscale/",
            "title": "OpenWrt安装配置Tailscale",
            "date_published": "2025-04-10T16:16:54.000Z",
            "content_html": "<h1 id=\"OpenWrt安装配置Tailscale\"><a href=\"#OpenWrt安装配置Tailscale\" class=\"headerlink\" title=\"OpenWrt安装配置Tailscale\"></a>OpenWrt安装配置Tailscale</h1><h2 id=\"什么是Tailscale\"><a href=\"#什么是Tailscale\" class=\"headerlink\" title=\"什么是Tailscale\"></a>什么是Tailscale</h2><p>Tailscale就是基于Wireguard的一个联网工具，无需公网地址，通过去中心化，实现各个节点之间点对点的连接.配置简单友好，支持的各类平台和客户端.</p>\n<h2 id=\"Tailscale的优势\"><a href=\"#Tailscale的优势\" class=\"headerlink\" title=\"Tailscale的优势\"></a>Tailscale的优势</h2><p>对比zerotier和wireguard,tailscale更容易连上官方的中转服务器,webui界面更简单,适合小白上手,并且可以一键更新,不需要公网ip。</p>\n<p>zerotier在没有ipv6的情况下很容易连接不上官方中转服务器导致设备掉线。</p>\n<p>wireguard需要公网ip,配置繁琐而且每次公网ip更换都需要重启wireguard接口。</p>\n<p>Tailscale Derp配置简单，可以在官方后台直接配置，而不像ZeroTier的moon，需要手动添加。</p>\n<h2 id=\"OpenWrt上的配置Tailscale\"><a href=\"#OpenWrt上的配置Tailscale\" class=\"headerlink\" title=\"OpenWrt上的配置Tailscale\"></a>OpenWrt上的配置Tailscale</h2><h3 id=\"下载软件\"><a href=\"#下载软件\" class=\"headerlink\" title=\"下载软件\"></a>下载软件</h3><p>将Tailscale软件包下载到指定目录。进入tailscale的github releases地址，找到最新的软件包，下载到本地。</p>\n<p>然后使用Winscp工具将下载的软件上传到OpenWrt的/tmp目录下，也可以找到下载链接，直接使用wget命令下载.</p>\n<p>示例命令：</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"code\"><pre><span class=\"line\">wget https://github.com/adyanth/openwrt-tailscale-enabler/releases/download/v1.60.0-e428948-autoupdate/openwrt-tailscale-enabler-v1.60.0-e428948-autoupdate.tgz</span><br><span class=\"line\"></span><br></pre></td></tr></tbody></table></figure>\n\n<h3 id=\"解压缩：\"><a href=\"#解压缩：\" class=\"headerlink\" title=\"解压缩：\"></a>解压缩：</h3><figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"code\"><pre><span class=\"line\">tar x -zvC / -f openwrt-tailscale-enabler-v1.60.0-e428948-autoupdate.tgz</span><br></pre></td></tr></tbody></table></figure>\n\n<h3 id=\"安装依赖包\"><a href=\"#安装依赖包\" class=\"headerlink\" title=\"安装依赖包\"></a>安装依赖包</h3><figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"code\"><pre><span class=\"line\">opkg update</span><br><span class=\"line\">opkg install libustream-openssl ca-bundle kmod-tun</span><br></pre></td></tr></tbody></table></figure>\n\n<h3 id=\"设置开机启动，验证开机启动是否成功\"><a href=\"#设置开机启动，验证开机启动是否成功\" class=\"headerlink\" title=\"设置开机启动，验证开机启动是否成功\"></a>设置开机启动，验证开机启动是否成功</h3><figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"code\"><pre><span class=\"line\">/etc/init.d/tailscale enable</span><br><span class=\"line\">ls /etc/rc.d/S*tailscale*</span><br></pre></td></tr></tbody></table></figure>\n\n<h3 id=\"启动tailscale\"><a href=\"#启动tailscale\" class=\"headerlink\" title=\"启动tailscale\"></a>启动tailscale</h3><figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"code\"><pre><span class=\"line\">/etc/init.d/tailscale start</span><br></pre></td></tr></tbody></table></figure>\n\n<h3 id=\"获取登录链接并配置路由\"><a href=\"#获取登录链接并配置路由\" class=\"headerlink\" title=\"获取登录链接并配置路由\"></a>获取登录链接并配置路由</h3><figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"code\"><pre><span class=\"line\">tailscale up</span><br></pre></td></tr></tbody></table></figure>\n\n<p><img src=\"https://cdn.jsdelivr.net/gh/xubiaolin/picgo@master/0b21ac58c225cc714d757c1c74c483c4d66c7a754f25ac4a99ca69b18d7cdf21.png\" alt=\"picture 0\">  </p>\n<p>复制显示的地址，并在浏览器中打开，使用谷歌或微软帐号登录Tailscale的管理主页进行验证。<br> 不建议使用谷歌账号,因为使用谷歌后你手机在外面链接需要先开科学再登录谷歌账号才能链接上tailscale的app.</p>\n<h3 id=\"开启子网路由\"><a href=\"#开启子网路由\" class=\"headerlink\" title=\"开启子网路由\"></a>开启子网路由</h3><p>在OpenWrt上输入以下命令，打开本地子路由。子网地址是OpenWrt的lan网络。192.168.11.0/24是我的子网,不要无脑复制我的!!!!!</p>\n<figure class=\"highlight plaintext\"><table><tbody><tr><td class=\"code\"><pre><span class=\"line\">tailscale up --accept-routes --accept-dns=false --advertise-routes=192.168.11.0/24</span><br></pre></td></tr></tbody></table></figure>\n\n<p>在Tailscale的管理页面上，单击设备列表右侧的更多图标，禁用密钥过期，并打开子网路由。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/xubiaolin/picgo@master/31787ab2a9a34e778f359e8e02de51a55c944f3302301fa6730c40925de43bd4.png\" alt=\"picture 1\">  </p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/xubiaolin/picgo@master/2f7d55c9e63b03c85f3b2540a6193b8dcb26b5bbfb4a7d3ac11370cfb890cd38.png\" alt=\"picture 2\">  </p>\n<h3 id=\"添加Tailscale接口\"><a href=\"#添加Tailscale接口\" class=\"headerlink\" title=\"添加Tailscale接口\"></a>添加Tailscale接口</h3><p>现在在OpenWrt上已经可以ping通其他Tailscale节点了，但其他节点还无法连接OpenWrt节点，还需要在OpenWrt上添加Tailscale接口。</p>\n<p>在OpenWrt上新建一个接口，协议选静态地址，设备选tailscale0，地址为Taliscale管理页面上分配的地址，掩码255.0.0.0。防火墙区域选lan区域。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/xubiaolin/picgo@master/1416664fad80fd03575313b0f994b6c259c7efe4b0225ca49c01d2b2401810fd.png\" alt=\"picture 3\">  </p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/xubiaolin/picgo@master/afc88d82a37faa58fbc0bb1091e62153a9935a7a436f1cc790e2b7742bd568c2.png\" alt=\"picture 4\">  </p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/xubiaolin/picgo@master/3192a5a1f18db4ba4bebaf5d867780a31b1906f67ebc4c5f50bc7cff43e18b50.png\" alt=\"picture 5\">  </p>\n<h2 id=\"测试\"><a href=\"#测试\" class=\"headerlink\" title=\"测试\"></a>测试</h2><p>在另一个设备访问<a href=\"http://192.168.11.1/\">http://192.168.11.1</a> ，如果可以访问，则说明配置成功。<br>ps：这里的192.168.11.1是我的OpenWrt的ip地址，不要无脑复制我的。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/xubiaolin/picgo@master/b6b396b92783834191aab87cd5c7c8eb612f5429b209fee24b8ec9f8cf21387e.png\" alt=\"picture 6\">  </p>\n",
            "tags": [
                "组网",
                "OpenWrt",
                "Tailscale"
            ]
        }
    ]
}